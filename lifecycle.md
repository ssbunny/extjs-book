# 组件生命周期

ExtJS 的组件生命周期分为三个阶段：

* 初始化
* 渲染
* 销毁

准确理解组件的生命周期过程，是正确使用 ExtJS 框架的基础。
尤其当你需要编写 ExtJS 的插件或对其做其它扩展时，
更应该知道组件详细的生命周期过程。

![lifecycle_01](img/lifecycle_01.png)

从图中可以看出，ExtJS 的组件始于**初始化**终于**销毁**，
而且组件未必需要经过**渲染**即可进入销毁阶段。不同版本的
ExtJS 处理的细节必然不尽相同，我很难告诉你一个永远正确的、
详实的生命周期过程，因此我以 4.2 版本为蓝本讨论其生命周期中具体的处理过程，
希望给你一个方向性的指引，而你应该根据手中具体的版本结合API文档，
甚至是源代码来确定生命周期过程中的每一个细节。值得庆幸的是，
我在 ExtJS 3.4/4.2/5.1 三个版本中，都没有发现其生命周期有很大的变动。

另一件值得补充的事是，我在实践中发现有不少人知道 “ExtJS 存在生命周期”
这么一回儿事，然而并不清楚这和自己的代码有什么关系。我想在正式讲解前告诉你，
当你 `Ext.create` (或 `new`) 一个组件时，它的生命周期过程就会开始，例如：

```js
Ext.create('Ext.grid.Panel', {
    title: 'MyPanel',
    height: 200,
    width: 400,
    store: ...,
    columns: ...
});
```

我们创建了一个 ExtJS 的列表组件，此时它会完成生命周期中的 “初始化”
阶段，当我们在浏览器中执行以上代码时并没有看到列表页面，因为组件还没有渲染。
如果我们配置了 `renderTo` 属性，则它会在初始化后直接进入渲染阶段。

又如，通过调用 `add` 方法给 toolbar 组件增加新的按钮：

```js
toolbar.add([
    {text: 'Button 1'},
    {text: 'Button 2'}
]);
```

这一过程通常也会经过“初始化”和“渲染”阶段。我们只是传入了一个极其普通的
JavaScript 对象，ExtJS 框架内部会帮我们创建、初始化 `Button`
对象并将其渲染到相应容器(此例为 `toolbar`)中。如果你想自己完成初始化操作，
可以这样：

```js
var anothorBtn = Ext.create('Ext.button.Button', {
    text: 'MyButton'
});
toobar.add(anothorBtn);
```


## 初始化

初始化是组件开始构建的起点，你可以粗略地认为，本阶段仅是创建
JavaScript 对象的过程，也正因此初始化可能是执行速度最快的。
这一阶段会进行必要的配置信息处理、注册一些基础事件，甚至会做预渲染工作。


